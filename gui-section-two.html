<!DOCTYPE html>
<html lang="zh">
<head>
          <title>Hester's Blog - GUI Section Two</title>
        <meta charset="utf-8" />





</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Hester's Blog <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li class="active"><a href="/category/blog.html">blog</a></li>
            <li><a href="/category/java-note.html">Java Note</a></li>
            <li><a href="/category/note.html">note</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="/gui-section-two.html" rel="bookmark"
         title="Permalink to GUI Section Two">GUI Section Two</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2017-11-01T10:20:00+01:00">
      三 01 十一月 2017
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="/author/hester.html">Hester</a>
    </address>
    <div class="category">
        Category: <a href="/category/blog.html">Blog</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>本部分是对GUI中的事件注册进行讨论，初始的代码如下：</p>
<div class="highlight"><pre><span></span><code><span class="c1">//:com/gui/start/Button1.java</span>
<span class="kn">package</span> <span class="nn">com.gui.start</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Button1</span> <span class="kd">extends</span> <span class="n">JFrame</span><span class="p">{</span>
    <span class="kd">private</span> <span class="n">JButton</span>
        <span class="n">b1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s">&quot;Button1&quot;</span><span class="p">),</span>
        <span class="n">b2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s">&quot;Button2&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="n">JLabel</span>
        <span class="n">label1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s">&quot;Label one&quot;</span><span class="p">),</span>
        <span class="n">label2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s">&quot;Label two&quot;</span><span class="p">);</span>

    <span class="kd">public</span> <span class="nf">Button1</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">setLayout</span><span class="p">(</span><span class="k">new</span> <span class="n">FlowLayout</span><span class="p">());</span> <span class="c1">//每加入一个控件，都会从左到右，从上到下分布</span>
        <span class="n">add</span><span class="p">(</span><span class="n">b1</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">b2</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">label1</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">label2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// TODO Auto-generated method stub</span>
        <span class="n">SwingConsole</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="k">new</span> <span class="n">Button1</span><span class="p">(),</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>


<p><img alt="unavailable" src="img/button1.jpg" title="p1"></p>
<p>上述的代码显示的效果很简单，即一个Frame中布置了两个Button和两个Label，但是为了使得Button具有交互意义，必须为其注册事件，即下面的Button2.java那样：</p>
<div class="highlight"><pre><span></span><code><span class="c1">//:com/gui/start/Button2.java</span>
<span class="kn">package</span> <span class="nn">com.gui.start</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.*</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Button2</span> <span class="kd">extends</span> <span class="n">JFrame</span><span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * </span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5828712884530293792L</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">JButton</span>
        <span class="n">button1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s">&quot;Button one&quot;</span><span class="p">),</span>
        <span class="n">button2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s">&quot;Button two&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="n">JTextField</span> <span class="n">txt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JTextField</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

    <span class="kd">class</span> <span class="nc">ButtonListener</span> <span class="kd">implements</span> <span class="n">ActionListener</span> <span class="p">{</span> <span class="c1">//定义事件监听器，使用匿名类是一个不错的选择</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="p">(</span><span class="n">ActionEvent</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// TODO Auto-generated method stub</span>
            <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="p">((</span><span class="n">JButton</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="na">getSource</span><span class="p">()).</span><span class="na">getText</span><span class="p">();</span>
            <span class="n">txt</span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="n">name</span><span class="p">);</span> <span class="c1">//内部类可以访问外部类的private成员</span>
        <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">public</span> <span class="nf">Button2</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">setLayout</span><span class="p">(</span><span class="k">new</span> <span class="n">FlowLayout</span><span class="p">());</span>
        <span class="n">add</span><span class="p">(</span><span class="n">button1</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">button2</span><span class="p">);</span>
        <span class="n">button1</span><span class="p">.</span><span class="na">addActionListener</span><span class="p">(</span><span class="k">new</span> <span class="n">ButtonListener</span><span class="p">());</span> <span class="c1">//注册事件</span>
        <span class="n">button2</span><span class="p">.</span><span class="na">addActionListener</span><span class="p">(</span><span class="k">new</span> <span class="n">ButtonListener</span><span class="p">());</span>
        <span class="n">add</span><span class="p">(</span><span class="n">txt</span><span class="p">);</span>
    <span class="p">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// TODO Auto-generated method stub</span>
        <span class="n">SwingConsole</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="k">new</span> <span class="n">Button2</span><span class="p">(),</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>


<p><img alt="unavailable" src="img/button2.jpg" title="p2"></p>
<p>Button2实现了Button的交互效果，当鼠标点击任意一个Button时，TestField会显示Button中的字符串，任何事件都需要实现ActionListerner接口实现，然后在相应的控件中使用addActionListener进行事件注册。而接下来的Button2b则是使用匿名内部类实现了Button2相同的效果，感觉代码量更少并且更加清晰。</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.*</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Button2b</span> <span class="kd">extends</span> <span class="n">JFrame</span><span class="p">{</span>
    <span class="kd">private</span> <span class="n">JButton</span> 
        <span class="n">button1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s">&quot;Button 1&quot;</span><span class="p">),</span>
        <span class="n">button2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s">&quot;Button 2&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="n">JTextField</span> <span class="n">txt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JTextField</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="kd">private</span> <span class="n">ActionListener</span> <span class="n">bl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ActionListener</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//使用匿名内部类实现事件监听</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="p">(</span><span class="n">ActionEvent</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="p">((</span><span class="n">JButton</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="na">getSource</span><span class="p">()).</span><span class="na">getText</span><span class="p">();</span>
            <span class="n">txt</span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">public</span> <span class="nf">Button2b</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">button1</span><span class="p">.</span><span class="na">addActionListener</span><span class="p">(</span><span class="n">bl</span><span class="p">);</span>
        <span class="n">button2</span><span class="p">.</span><span class="na">addActionListener</span><span class="p">(</span><span class="n">bl</span><span class="p">);</span>
        <span class="n">setLayout</span><span class="p">(</span><span class="k">new</span> <span class="n">FlowLayout</span><span class="p">());</span>
        <span class="n">add</span><span class="p">(</span><span class="n">button1</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">button2</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">txt</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// TODO Auto-generated method stub</span>
        <span class="n">SwingConsole</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="k">new</span> <span class="n">Button2b</span><span class="p">(),</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>